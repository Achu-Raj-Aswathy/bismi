<%- include('./partials/header') %>
    <%- include('./partials/userHeader') %>

        <!-- **************** MAIN CONTENT START **************** -->
        <main>

            <!-- =======================
    Content START -->
            <section class="pt-3">
                <div class="container">

                    <div class="row g-2 g-lg-4">

                        <!-- Sidebar START -->
                        <%- include('./partials/userSidebar') %>
                            <!-- Sidebar END -->

                            <!-- Main content START -->
                            <div class="col-lg-8 col-xl-9 ps-xl-5">

                                <!-- Offcanvas menu button -->
                                <div class="d-grid mb-0 d-lg-none w-100">
                                    <button class="btn btn-primary mb-4" type="button" data-bs-toggle="offcanvas"
                                        data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
                                        <i class="fas fa-sliders-h"></i> Menu
                                    </button>
                                </div>

                                <div class="card border">
                                    <!-- Card header START -->
                                    <div class="card-header border-bottom">
                                        <h4 class="card-header-title">User Bookings
                                            <span class="badge bg-primary bg-opacity-10 text-primary ms-2" style="font-size: medium;">20 Tickets</span>
                                        </h4>
                                    </div>
                                    <!-- Card header END -->

                                    <!-- Card body START -->
                                    <div class="card-body">
                                        <!-- Search and select START -->
                                        <div class="row g-3 align-items-center justify-content-between mb-3">
                                            <!-- Search -->
                                            <div class="col-md-8">
                                                <form class="rounded position-relative">
                                                    <input class="form-control pe-5" type="search" placeholder="Search"
                                                        aria-label="Search">
                                                    <button
                                                        class="btn border-0 px-3 py-0 position-absolute top-50 end-0 translate-middle-y"
                                                        type="submit"><i class="fas fa-search fs-6"></i></button>
                                                </form>
                                            </div>

                                            <!-- Select option -->
                                            <div class="col-md-3">
                                                <!-- Short by filter -->
                                                <form>
                                                    <select class="form-select js-choice" aria-label=".form-select-sm">
                                                        <option value="">Sort by</option>
                                                        <option>Free</option>
                                                        <option>Newest</option>
                                                        <option>Oldest</option>
                                                    </select>
                                                </form>
                                            </div>
                                        </div>
                                        <!-- Search and select END -->

                                        <!-- Hotel room list START -->
                                        <div class="table-responsive border-0">
                                            <table class="table align-middle p-4 mb-0 table-hover table-shrink">
                                                <!-- Table head -->
                                                <thead class="table-light">
                                                    <tr>
                                                        <th scope="col" class="border-0 rounded-start">#</th>
                                                        <th scope="col" class="border-0">Airline</th>
                                                        <th scope="col" class="border-0">From</th>
                                                        <th scope="col" class="border-0">To</th>
                                                        <th scope="col" class="border-0">Departure</th>
                                                        <th scope="col" class="border-0">Arrival</th>
                                                        <th scope="col" class="border-0 rounded-end">Action</th>
                                                    </tr>
                                                </thead>

                                                <!-- Table body START -->
                                                <tbody class="border-top-0">
                                                    <% if (bookings.length === 0) { %>
                                                      <tr>
                                                        <td colspan="7" class="text-center">No bookings found.</td>
                                                      </tr>
                                                    <% } else { %>
                                                      <% bookings.forEach((booking, index) => { %>
                                                        <tr>
                                                          <td><h6 class="mb-0"><%= index + 1 %></h6></td>
                                                          <td><h6 class="mb-0"><%= booking.flight.stops[0].airline || 'N/A' %></h6></td>
                                                          <td><%= booking.flight.from %></td>
                                                          <td><%= booking.flight.to %></td>
                                                          <td><%= booking.flight.departureDate  %></td>
                                                          <td><%= booking.flight.arrivalDate %></td>
                                                          <td>
                                                            <a href="/user-bookings?id=<%= booking._id %>" class="btn btn-sm btn-light mb-0">View</a>
                                                          </td>
                                                        </tr>
                                                      <% }); %>
                                                    <% } %>
                                                  </tbody>
                                                <!-- Table body END -->
                                            </table>
                                        </div>
                                        <!-- Hotel room list END -->
                                    </div>
                                    <!-- Card body END -->

                                    <!-- Card footer START -->
                                    <div class="card-footer pt-0">
                                        <!-- Pagination and content -->
                                        <div class="d-sm-flex justify-content-sm-between align-items-sm-center">
                                            <!-- Content -->
                                            <p class="mb-sm-0 text-center text-sm-start">Showing 1 to 8 of 20 entries
                                            </p>
                                            <!-- Pagination -->
                                            <nav class="mb-sm-0 d-flex justify-content-center" aria-label="navigation">
                                                <ul class="pagination pagination-sm pagination-primary-soft mb-0">
                                                    <li class="page-item disabled">
                                                        <a class="page-link" href="#" tabindex="-1">Prev</a>
                                                    </li>
                                                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                                                    <li class="page-item active"><a class="page-link" href="#">2</a>
                                                    </li>
                                                    <li class="page-item disabled"><a class="page-link" href="#">..</a>
                                                    </li>
                                                    <li class="page-item"><a class="page-link" href="#">15</a></li>
                                                    <li class="page-item">
                                                        <a class="page-link" href="#">Next</a>
                                                    </li>
                                                </ul>
                                            </nav>
                                        </div>
                                    </div>
                                    <!-- Card footer END -->
                                </div>
                            </div>
                    </div>
                    <!-- Booking table END -->
                </div>
            </section>
            <!-- =======================
    Content END -->

        </main>
        <!-- **************** MAIN CONTENT END **************** -->

        <%- include('./partials/footer') %>